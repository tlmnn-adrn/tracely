

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="de" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="de" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mixins &mdash; Tracely - MVC Framework  Dokumentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="prev" title="Controller" href="controller.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Tracely - MVC Framework
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getStartet.html">Erste Schritte</a></li>
<li class="toctree-l1"><a class="reference internal" href="controller.html">Controller</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Mixins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#verwendung">Verwendung</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code">Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#die-init-funktion">Die Init-Funktion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#benennung">Benennung</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vorhandene-mixins">Vorhandene Mixins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loginrequiredmixin">LoginRequiredMixin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#funktion">Funktion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#loginredirectmixin">LoginRedirectMixin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Funktion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#userpassestestmixin">UserPassesTestMixin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Funktion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Tracely - MVC Framework</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Mixins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/mixin.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mixins">
<h1>Mixins<a class="headerlink" href="#mixins" title="Link zu dieser Überschrift">¶</a></h1>
<div class="section" id="verwendung">
<h2>Verwendung<a class="headerlink" href="#verwendung" title="Link zu dieser Überschrift">¶</a></h2>
<p>Mixins sind Traits. Das bedeutet, sie enthalten eine oder mehrere Funktionen. Als Trait können sie in mehreren Klassen zum Einsatz kommen.
So kann eine Funktion in verschiedensten Klassen verwendet werden. Mixins sollten in Controller Klassen verwendet werden.</p>
<div class="section" id="code">
<h3>Code<a class="headerlink" href="#code" title="Link zu dieser Überschrift">¶</a></h3>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nx">TestController</span> <span class="k">extends</span> <span class="nx">Controller</span>
    <span class="p">{</span>

    <span class="k">use</span> <span class="nx">TestMixin</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="die-init-funktion">
<h2>Die Init-Funktion<a class="headerlink" href="#die-init-funktion" title="Link zu dieser Überschrift">¶</a></h2>
<p>Der Controller überprüft in seiner __construct Funktion für jedes installierte Mixin, ob es eine Init Funktion hat.
Ist dies der Fall, wird sie mit den Argumenten als Parameter aufgerufen.</p>
<div class="section" id="benennung">
<h3>Benennung<a class="headerlink" href="#benennung" title="Link zu dieser Überschrift">¶</a></h3>
<p>Die Init Funktion sollte der Name des Traits (mit kleinem ersten Buchstaben) gefolgt einem Init sein.
Das Trait <em>TestTrait</em> sollte also die Init-Funktion <em>testTraitInit(…$arguments)</em> haben.</p>
</div>
</div>
<div class="section" id="vorhandene-mixins">
<h2>Vorhandene Mixins<a class="headerlink" href="#vorhandene-mixins" title="Link zu dieser Überschrift">¶</a></h2>
<div class="section" id="loginrequiredmixin">
<h3>LoginRequiredMixin<a class="headerlink" href="#loginrequiredmixin" title="Link zu dieser Überschrift">¶</a></h3>
<div class="section" id="funktion">
<h4>Funktion<a class="headerlink" href="#funktion" title="Link zu dieser Überschrift">¶</a></h4>
<p>Mit diesem Mixin können Seiten gekennzeichnet werden, für die es nötig ist, angemeldet zu sein.
Ist der Benutzer nicht angemeldet, wird er zur Anmeldeseite weitergeleitet.</p>
</div>
<div class="section" id="id1">
<h4>Code<a class="headerlink" href="#id1" title="Link zu dieser Überschrift">¶</a></h4>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nx">LoginRequiredMixin</span><span class="p">{</span>

    <span class="k">function</span> <span class="nf">loginRequiredMixinInit</span><span class="p">(</span><span class="nv">$arguments</span><span class="o">=</span><span class="p">[]){</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">AuthModel</span><span class="o">::</span><span class="na">isLoggedIn</span><span class="p">()){</span>
            <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Location: &#39;</span><span class="o">.</span><span class="nx">AuthModel</span><span class="o">::</span><span class="na">getLoginUrl</span><span class="p">());</span>
            <span class="k">exit</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="loginredirectmixin">
<h3>LoginRedirectMixin<a class="headerlink" href="#loginredirectmixin" title="Link zu dieser Überschrift">¶</a></h3>
<div class="section" id="id2">
<h4>Funktion<a class="headerlink" href="#id2" title="Link zu dieser Überschrift">¶</a></h4>
<p>Dieses Mixin leitet schon angemeldete Benutzer weiter. Es kann zum Beispiel verwendet werden,
um angemeldete Besucher von der Login-Seite automatisch zur Einstellungs-Seite seines Accounts weiterzuleiten.</p>
</div>
<div class="section" id="id3">
<h4>Code<a class="headerlink" href="#id3" title="Link zu dieser Überschrift">¶</a></h4>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nx">LoginRedirectMixin</span><span class="p">{</span>

    <span class="k">function</span> <span class="nf">loginRedirectMixinInit</span><span class="p">(</span><span class="nv">$arguments</span><span class="o">=</span><span class="p">[]){</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">AuthModel</span><span class="o">::</span><span class="na">isLoggedIn</span><span class="p">()){</span>
            <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Location: &#39;</span><span class="o">.</span><span class="nx">AuthModel</span><span class="o">::</span><span class="na">getLogoutSuccessUrl</span><span class="p">());</span>
            <span class="k">exit</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="userpassestestmixin">
<h3>UserPassesTestMixin<a class="headerlink" href="#userpassestestmixin" title="Link zu dieser Überschrift">¶</a></h3>
<div class="section" id="id4">
<h4>Funktion<a class="headerlink" href="#id4" title="Link zu dieser Überschrift">¶</a></h4>
<p>Dieses Mixin ruft in seiner Init-Funktion die Methode <em>testFunc(…$arguments)</em> des Controllers auf.
Dafür muss zuerst eine <em>testFunc</em> im Controller definiert werden.
Returnt die <em>testFunc</em> False, wird eine 404-Seite angezeigt.</p>
</div>
<div class="section" id="id5">
<h4>Code<a class="headerlink" href="#id5" title="Link zu dieser Überschrift">¶</a></h4>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">trait</span> <span class="nx">UserPassesTestMixin</span><span class="p">{</span>

    <span class="k">function</span> <span class="nf">userPassesTestMixinInit</span><span class="p">(</span><span class="nv">$arguments</span><span class="o">=</span><span class="p">[]){</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">testFunc</span><span class="p">(</span><span class="o">...</span><span class="nv">$arguments</span><span class="p">)){</span>
            <span class="k">new</span> <span class="nx">BaseError</span><span class="p">(</span><span class="s1">&#39;404&#39;</span><span class="p">,</span> <span class="s1">&#39;Du darfst diese Seite nicht ansehen&#39;</span><span class="p">,</span> <span class="mi">404</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="controller.html" class="btn btn-neutral" title="Controller" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Tilmann Adrian, Jakob Großer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'de',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>